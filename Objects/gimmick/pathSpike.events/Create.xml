<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<event category="CREATE" id="0">
  <actions>
    <action id="603" library="1">
      <!--action name: Code-->
      <kind>CODE</kind>
      <allowRelative>false</allowRelative>
      <question>false</question>
      <canApplyTo>true</canApplyTo>
      <actionType>CODE</actionType>
      <functionName/>
      <relative>false</relative>
      <not>false</not>
      <appliesTo>.self</appliesTo>
      <arguments>
        <argument kind="STRING">//Creates spikes moving along a path
//
//  in the creation code, put:
//
//      num     the total number of spikes
//      pth     the path spikes moving along, closed
//      spd     the moving speed of spikes
//      spr     the sprite of the spikes(optional), default sprite is sprSpikeUp
//      off     the offset of the path
//

// creating at least 1 spike
ensure('pth', pth)
ensure('spd', spd)
if (!path_get_closed(pth)) {
    show_error(
        'pth of `pathSpike` has to be closed. Current path: ' +
            path_get_name(pth) +
            'room: ' +
            room_get_name(room) +
            ', position: (' +
            string(x) +
            ', ' +
            string(y) +
            ').',
        0
    )
}

num = set_default(num, 1)
spr = set_default(spr, sprSpikeUp)

for (i = 0; i &lt; num; i += 1) {
    inst = instance_create(x, y, playerKiller)
    inst.depth = 1000002
    with (inst) {
        path_start(other.pth, other.spd, 1, 0)
    }
    inst.sprite_index = spr
    inst.path_position = frac(i / num + off)
}
instance_destroy()

</argument>
      </arguments>
    </action>
  </actions>
</event>
